import { useEffect, useState } from 'react';

type LocaleKey = 'es' | 'es-mx' | 'en';

type TranslationPack = {
  ui: Record<string, string>;
  status: Record<string, string>;
  preset: Record<string, string>;
};

const TRANSLATIONS: Record<LocaleKey, TranslationPack> = {
  es: {
    ui: {
      navUpload: 'Subir',
      navJobs: 'Cola de procesamiento',
      navSettings: 'Configuración',
      logout: 'Salir',
      logoutTitle: 'Cerrar sesión',
      logoutMessage: '¿Seguro que quieres salir de la sesión? Tendrás que iniciar sesión de nuevo.',
      logoutConfirm: 'Salir',
      jobQueueTitle: 'Cola de procesamiento',
      jobQueueSubtitle: 'Revisa el estado de los procesos activos y finalizados.',
      update: 'Actualizar',
      concurrency: 'Concurrencia',
      concurrencyHelp: 'Define cuántas imágenes se procesan en paralelo (1 a 10).',
      concurrencyWarn: 'Advertencia: valores altos pueden hacer lenta tu computadora.',
      tableId: 'ID',
      tablePreset: 'Preset',
      tableStatus: 'Estado',
      tableProgress: 'Progreso',
      tableFiles: 'Archivos',
      tableActions: 'Acciones',
      view: 'Ver',
      pause: 'Pausar',
      resume: 'Reanudar',
      cancel: 'Cancelar',
      deleteJob: 'Borrar',
      confirmDeleteJob: '¿Quieres borrar este trabajo y sus archivos?',
      confirmDeleteJobTitle: 'Confirmar eliminación',
      confirmDeleteJobMessage:
        '¿Seguro que quieres borrar este trabajo y todos sus archivos asociados? Esta acción no se puede deshacer.',
      emptyJobs: 'Aún no hay trabajos creados.',
      uploadTitle: 'Optimiza imágenes por lote',
      uploadSubtitle: 'Carga archivos, selecciona una categoría y un preset. El procesamiento ocurre en segundo plano.',
      dropTitle: 'Arrastra y suelta',
      dropSubtitle: 'o selecciona archivos desde tu computadora.',
      dropActiveTitle: 'Suelta tus archivos aquí',
      dropActiveSubtitle: 'Detectamos tus imágenes. Suelta para agregarlas.',
      onlyImages: 'Solo se permiten imágenes.',
      selectCategory: 'Categoría',
      selectPreset: 'Preset',
      suggestionSharp: 'Sugerencia: Más nítido (1.25x-1.5x).',
      summaryFiles: 'Archivos',
      summarySize: 'Tamaño total',
      process: 'Procesar',
      clearFiles: 'Borrar',
      creatingJobs: 'Creando trabajos...',
      errorCreateJobFallback: 'No se pudo crear el job. Intenta de nuevo.',
      errorLoadJob: 'No se pudo cargar el trabajo.',
      errorLoadJobs: 'No se pudieron cargar los trabajos.',
      errorLoadSettings: 'No se pudo cargar la configuración.',
      errorUpdateConcurrency: 'No se pudo actualizar la concurrencia.',
      errorPauseJob: 'No se pudo pausar el trabajo.',
      errorResumeJob: 'No se pudo reanudar el trabajo.',
      errorCancelJob: 'No se pudo cancelar el trabajo.',
      errorDeleteJob: 'No se pudo borrar el trabajo.',
      errorApplySettings: 'No se pudieron aplicar los ajustes.',
      errorSaveSettings: 'No se pudieron guardar los ajustes.',
      settingsSaved: 'Ajustes guardados.',
      settingsCanceled: 'Cambios cancelados.',
      settingsReset: 'Ajustes restablecidos.',
      presetSaved: 'Preset guardado.',
      errorSavePreset: 'No se pudo guardar el preset.',
      errorDuplicatePreset: 'No se pudo duplicar.',
      errorDeletePreset: 'No se pudo eliminar.',
      jobsCreatedInfo: 'Se crearon {jobs} trabajos porque cargaste {images} imágenes (máx 10 por trabajo).',
      errorNoImages: 'Carga al menos una imagen.',
      errorSelectPreset: 'Selecciona un preset.',
      jobDetailTitle: 'Detalle de las optimizaciones',
      jobDetailSubtitle: 'Consulta el progreso y descarga los resultados.',
      backToJobs: 'Volver a la cola',
      downloadZip: 'Descargar ZIP',
      loginEyebrow: 'Inicio de sesión (demostración)',
      loginTitle: 'Proyecto VIII — Optimizador Digital',
      loginSubtitle: 'Acceso rápido para presentación académica.',
      loginPanelTitle: 'Qué puedes hacer con esta plataforma',
      loginBulletBatch: 'Optimiza imágenes por lote (Web y Redes)',
      loginBulletPresets: 'Presets listos para Instagram, Facebook, X, LinkedIn y más',
      loginBulletCrop: 'Recorte manual con vista previa',
      loginBulletAdjust: 'Ajustes por imagen: formato, calidad, metadatos y 2x',
      loginBulletZip: 'Descarga resultados en ZIP con reporte completo',
      loginFormTitle: 'Bienvenido',
      loginFormSubtitle: 'Inicia sesión para continuar con la demostración.',
      loginUserLabel: 'Usuario',
      loginPassLabel: 'Contraseña',
      loginRemember: 'Recordar sesión',
      loginShow: 'Mostrar',
      loginHide: 'Ocultar',
      loginButton: 'Iniciar sesión',
      loginLoading: 'Iniciando...',
      loginError: 'Usuario o contraseña incorrectos.',
      loginHelp: '¿Problemas para entrar?',
      loginHintUser: 'Usuario: proyectoVIII',
      loginHintPass: 'Contraseña: Admin',
      loginDemoUser: 'Usuario de demostración: proyectoVIII',
      loginDemoPass: 'Contraseña de demostración: Admin',
      loginFooterSubject: 'Materia: Proyecto VIII',
      loginFooterAdvisor: 'Asesora: Ursula del Pilar González Robles',
      loginFooterTeam: 'Equipo Scrum:',
      loginFooterMember1: '• Luis Yasmani Fajardo Durán – 222958771 (Product Owner)',
      loginFooterMember2: '• Bertha Alicia Ortega Ruiz – 303653994 (Scrum Master)',
      loginFooterMember3: '• Victor Leobardo Salinas Lemoine – 223983265 (Developer)',
      loginFooterMember4: '• Derek Kaled Barajas Cuevas – 223371901 (Developer)',
      loginFooterYear: 'Año: {year}',
      summary: 'Resumen',
      preview: 'Vista previa',
      snippetBase: 'Ruta base (src)',
      snippetAll: 'Copiar snippet (todos)',
      copySnippet: 'Copiar snippet',
      snippetCopied: 'Snippet copiado.',
      snippetAdvanced: 'Se genera snippet avanzado cuando hay múltiples formatos o 2x.',
      dimsBefore: 'Dimensiones antes',
      dimsAfter: 'Dimensiones después',
      cropped: 'Recorte aplicado',
      metadataRemoved: 'Metadatos eliminados',
      finalFormat: 'Formato final',
      original: 'Original',
      optimized: 'Optimizado (según preset)',
      orientationLabel: 'Orientación',
      aspectLabel: 'Aspect',
      transparencyLabel: 'Transparencia',
      typeLabel: 'Tipo',
      photoLabel: 'Foto',
      notAvailable: 'No disponible',
      notReady: 'Aún no disponible',
      outputTarget: 'Salida objetivo',
      reduction: 'Reducción',
      primaryFormat: 'Formato principal',
      outputsGenerated: 'Salidas generadas',
      status: 'Estado',
      yes: 'Sí',
      no: 'No',
      originalSizeLabel: 'Original',
      optimizedSizeLabel: 'Optimizado',
      resultNameLabel: 'Nombre resultante',
      settingsEditable: 'Ajustes (puedes modificarlos)',
      fileSettings: 'Ajustes',
      unsavedChanges: 'Cambios sin guardar',
      formatsToGenerate: 'Formatos a generar',
      primaryLabel: 'Principal',
      qualityWebp: 'Calidad WebP',
      qualityJpg: 'Calidad JPG',
      removeMetadata: 'Eliminar metadatos',
      keepTransparency: 'Mantener transparencia',
      generate2x: 'Generar 2x (retina)',
      sharpened: 'Más nítido (1.25×–1.5×)',
      recommendedPreset: 'Recomendado para este preset',
      applySettings: 'Aplicar ajustes',
      pendingChanges: 'Cambios pendientes por aplicar.',
      crop: 'Recortar',
      autoCrop: 'Recorte automático activado por cambio de orientación',
      noUpscale:
        'Sin upscaling: el original es menor que el tamaño objetivo, el recorte se ajustará al máximo posible.',
      partialFailures: 'Algunos archivos fallaron. Revisa los detalles.',
      settingsApplied: 'Ajustes aplicados y archivo reprocesado.',
      cropReady: 'Recorte listo. Aplica ajustes para reprocesar.',
      recommendation: 'Recomendación (ver detalles)',
      recommendationPreset: 'Preset sugerido',
      recommendationFormats: 'Formatos sugeridos',
      recommendationQuality: 'Calidad sugerida',
      recommendationNote: 'Nota',
      recommendationCrop: 'Se sugiere recorte para ajustar al formato',
      settingsTitle: 'Configuración',
      settingsSubtitle: 'Personaliza el comportamiento y los presets de la app.',
      preferences: 'Preferencias',
      theme: 'Tema',
      themeDark: 'Oscuro',
      themeLight: 'Claro',
      language: 'Idioma',
      languageEs: 'Español',
      languageEsMx: 'Español (MX)',
      languageEn: 'Inglés',
      settingsConcurrency: 'Concurrencia (1–10)',
      settingsConcurrencyValue: 'Concurrencia (actual: {value})',
      defaultRemoveMetadata: 'Eliminar metadatos (recomendado)',
      defaultKeepTransparency: 'Mantener transparencia cuando aplique',
      showDebugDetails: 'Mostrar detalles técnicos',
      snippetTitle: 'Snippet HTML',
      loadingLazy: 'Carga diferida (loading="lazy")',
      decodingLabel: 'Decodificación (decoding)',
      includeSize: 'Incluir width/height',
      presetsCustom: 'Presets personalizados',
      presetId: 'ID (slug)',
      presetLabel: 'Etiqueta',
      presetCategory: 'Categoría',
      presetWidth: 'Ancho',
      presetHeight: 'Alto',
      presetAspect: 'Relación (W:H)',
      presetTypeHint: 'Tipo (foto/ui)',
      presetDensity: 'Densidad',
      presetRecommendedFormat: 'Formato recomendado',
      standardLabel: 'Estándar',
      higherDpiLabel: 'Alta densidad',
      saveSettings: 'Guardar cambios',
      cancelSettings: 'Cancelar cambios',
      resetSettings: 'Restablecer ajustes',
      createPreset: 'Crear preset',
      saveChanges: 'Guardar cambios',
      cancelEdit: 'Cancelar edición',
      noCustomPresets: 'No hay presets personalizados.',
      edit: 'Editar',
      duplicate: 'Duplicar',
      delete: 'Eliminar',
      confirmDelete: '¿Eliminar este preset?',
      cropTitle: 'Recortar imagen',
      cropSubtitle: 'Ajusta el área de recorte manteniendo la relación del preset.',
      cropReset: 'Restablecer',
      cropCancel: 'Cancelar',
      cropSave: 'Guardar recorte',
    },
    status: {
      PENDING: 'En espera',
      PROCESSING: 'En progreso',
      PAUSED: 'Pausado',
      CANCELED: 'Cancelado',
      DONE: 'Completado',
      FAILED: 'Fallido',
    },
    preset: {
      web: 'Web',
      redes: 'Redes',
      ecommerce: 'Ecommerce',
    },
  },
  'es-mx': {
    ui: {
      navUpload: 'Subir',
      navJobs: 'Cola de procesos',
      navSettings: 'Configuración',
      logout: 'Salir',
      logoutTitle: 'Cerrar sesión',
      logoutMessage: '¿Seguro que quieres salir de la sesión? Tendrás que iniciar sesión de nuevo.',
      logoutConfirm: 'Salir',
      jobQueueTitle: 'Cola de procesos',
      jobQueueSubtitle: 'Revisa el estado de los procesos activos y finalizados.',
      update: 'Actualizar',
      concurrency: 'Concurrencia',
      concurrencyHelp: 'Define cuántas imágenes se procesan en paralelo (1 a 10).',
      concurrencyWarn: 'Advertencia: valores altos pueden hacer lenta tu computadora.',
      tableId: 'ID',
      tablePreset: 'Preset',
      tableStatus: 'Estado',
      tableProgress: 'Progreso',
      tableFiles: 'Archivos',
      tableActions: 'Acciones',
      view: 'Ver',
      pause: 'Pausar',
      resume: 'Reanudar',
      cancel: 'Cancelar',
      deleteJob: 'Borrar',
      confirmDeleteJob: '¿Quieres borrar este trabajo y sus archivos?',
      confirmDeleteJobTitle: 'Confirmar eliminación',
      confirmDeleteJobMessage:
        '¿Seguro que quieres borrar este trabajo y todos sus archivos asociados? Esta acción no se puede deshacer.',
      emptyJobs: 'Aún no hay trabajos creados.',
      uploadTitle: 'Optimiza imágenes por lote',
      uploadSubtitle: 'Carga archivos, selecciona una categoría y un preset. El procesamiento ocurre en segundo plano.',
      dropTitle: 'Arrastra y suelta',
      dropSubtitle: 'o selecciona archivos desde tu computadora.',
      dropActiveTitle: 'Suelta tus archivos aquí',
      dropActiveSubtitle: 'Detectamos tus imágenes. Suelta para agregarlas.',
      onlyImages: 'Solo se permiten imágenes.',
      selectCategory: 'Categoría',
      selectPreset: 'Preset',
      suggestionSharp: 'Sugerencia: Más nítido (1.25x-1.5x).',
      summaryFiles: 'Archivos',
      summarySize: 'Tamaño total',
      process: 'Procesar',
      clearFiles: 'Borrar',
      creatingJobs: 'Creando trabajos...',
      errorCreateJobFallback: 'No se pudo crear el job. Intenta de nuevo.',
      errorLoadJob: 'No se pudo cargar el trabajo.',
      errorLoadJobs: 'No se pudieron cargar los trabajos.',
      errorLoadSettings: 'No se pudo cargar la configuración.',
      errorUpdateConcurrency: 'No se pudo actualizar la concurrencia.',
      errorPauseJob: 'No se pudo pausar el trabajo.',
      errorResumeJob: 'No se pudo reanudar el trabajo.',
      errorCancelJob: 'No se pudo cancelar el trabajo.',
      errorDeleteJob: 'No se pudo borrar el trabajo.',
      errorApplySettings: 'No se pudieron aplicar los ajustes.',
      errorSaveSettings: 'No se pudieron guardar los ajustes.',
      settingsSaved: 'Ajustes guardados.',
      settingsCanceled: 'Cambios cancelados.',
      settingsReset: 'Ajustes restablecidos.',
      presetSaved: 'Preset guardado.',
      errorSavePreset: 'No se pudo guardar el preset.',
      errorDuplicatePreset: 'No se pudo duplicar.',
      errorDeletePreset: 'No se pudo eliminar.',
      jobsCreatedInfo: 'Se crearon {jobs} trabajos porque cargaste {images} imágenes (máx 10 por trabajo).',
      errorNoImages: 'Carga al menos una imagen.',
      errorSelectPreset: 'Selecciona un preset.',
      jobDetailTitle: 'Detalle de optimizaciones',
      jobDetailSubtitle: 'Consulta el progreso y descarga los resultados.',
      backToJobs: 'Regresar a la cola',
      downloadZip: 'Descargar ZIP',
      loginEyebrow: 'Inicio de sesión (demostración)',
      loginTitle: 'Proyecto VIII — Optimizador Digital',
      loginSubtitle: 'Acceso rápido para presentación académica.',
      loginPanelTitle: 'Qué puedes hacer con esta plataforma',
      loginBulletBatch: 'Optimiza imágenes por lote (Web y Redes)',
      loginBulletPresets: 'Presets listos para Instagram, Facebook, X, LinkedIn y más',
      loginBulletCrop: 'Recorte manual con vista previa',
      loginBulletAdjust: 'Ajustes por imagen: formato, calidad, metadatos y 2x',
      loginBulletZip: 'Descarga resultados en ZIP con reporte completo',
      loginFormTitle: 'Bienvenido',
      loginFormSubtitle: 'Inicia sesión para continuar con la demostración.',
      loginUserLabel: 'Usuario',
      loginPassLabel: 'Contraseña',
      loginRemember: 'Recordar sesión',
      loginShow: 'Mostrar',
      loginHide: 'Ocultar',
      loginButton: 'Iniciar sesión',
      loginLoading: 'Iniciando...',
      loginError: 'Usuario o contraseña incorrectos.',
      loginHelp: '¿Problemas para entrar?',
      loginHintUser: 'Usuario: proyectoVIII',
      loginHintPass: 'Contraseña: Admin',
      loginDemoUser: 'Usuario de demostración: proyectoVIII',
      loginDemoPass: 'Contraseña de demostración: Admin',
      loginFooterSubject: 'Materia: Proyecto VIII',
      loginFooterAdvisor: 'Asesora: Ursula del Pilar González Robles',
      loginFooterTeam: 'Equipo Scrum:',
      loginFooterMember1: '• Luis Yasmani Fajardo Durán – 222958771 (Product Owner)',
      loginFooterMember2: '• Bertha Alicia Ortega Ruiz – 303653994 (Scrum Master)',
      loginFooterMember3: '• Victor Leobardo Salinas Lemoine – 223983265 (Developer)',
      loginFooterMember4: '• Derek Kaled Barajas Cuevas – 223371901 (Developer)',
      loginFooterYear: 'Año: {year}',
      summary: 'Resumen',
      preview: 'Vista previa',
      snippetBase: 'Ruta base (src)',
      snippetAll: 'Copiar snippet (todos)',
      copySnippet: 'Copiar snippet',
      snippetCopied: 'Snippet copiado.',
      snippetAdvanced: 'Se genera snippet avanzado cuando hay múltiples formatos o 2x.',
      dimsBefore: 'Dimensiones antes',
      dimsAfter: 'Dimensiones después',
      cropped: 'Recorte aplicado',
      metadataRemoved: 'Metadatos eliminados',
      finalFormat: 'Formato final',
      original: 'Original',
      optimized: 'Optimizado (según preset)',
      orientationLabel: 'Orientación',
      aspectLabel: 'Aspect',
      transparencyLabel: 'Transparencia',
      typeLabel: 'Tipo',
      photoLabel: 'Foto',
      notAvailable: 'No disponible',
      notReady: 'Aún no disponible',
      outputTarget: 'Salida objetivo',
      reduction: 'Reducción',
      primaryFormat: 'Formato principal',
      outputsGenerated: 'Salidas generadas',
      status: 'Estado',
      yes: 'Sí',
      no: 'No',
      originalSizeLabel: 'Original',
      optimizedSizeLabel: 'Optimizado',
      resultNameLabel: 'Nombre resultante',
      settingsEditable: 'Ajustes (puedes modificarlos)',
      fileSettings: 'Ajustes',
      unsavedChanges: 'Cambios sin guardar',
      formatsToGenerate: 'Formatos a generar',
      primaryLabel: 'Principal',
      qualityWebp: 'Calidad WebP',
      qualityJpg: 'Calidad JPG',
      removeMetadata: 'Eliminar metadatos',
      keepTransparency: 'Mantener transparencia',
      generate2x: 'Generar 2x (retina)',
      sharpened: 'Más nítido (1.25×–1.5×)',
      recommendedPreset: 'Recomendado para este preset',
      applySettings: 'Aplicar ajustes',
      pendingChanges: 'Cambios pendientes por aplicar.',
      crop: 'Recortar',
      autoCrop: 'Recorte automático activado por cambio de orientación',
      noUpscale:
        'Sin upscaling: el original es menor que el tamaño objetivo, el recorte se ajustará al máximo posible.',
      partialFailures: 'Algunos archivos fallaron. Revisa los detalles.',
      settingsApplied: 'Ajustes aplicados y archivo reprocesado.',
      cropReady: 'Recorte listo. Aplica ajustes para reprocesar.',
      recommendation: 'Recomendación (ver detalles)',
      recommendationPreset: 'Preset sugerido',
      recommendationFormats: 'Formatos sugeridos',
      recommendationQuality: 'Calidad sugerida',
      recommendationNote: 'Nota',
      recommendationCrop: 'Se sugiere recorte para ajustar al formato',
      settingsTitle: 'Configuración',
      settingsSubtitle: 'Personaliza el comportamiento y los presets de la app.',
      preferences: 'Preferencias',
      theme: 'Tema',
      themeDark: 'Oscuro',
      themeLight: 'Claro',
      language: 'Idioma',
      languageEs: 'Español',
      languageEsMx: 'Español (MX)',
      languageEn: 'Inglés',
      settingsConcurrency: 'Concurrencia (1–10)',
      settingsConcurrencyValue: 'Concurrencia (actual: {value})',
      defaultRemoveMetadata: 'Eliminar metadatos (recomendado)',
      defaultKeepTransparency: 'Mantener transparencia cuando aplique',
      showDebugDetails: 'Mostrar detalles técnicos',
      snippetTitle: 'Snippet HTML',
      loadingLazy: 'Carga diferida (loading="lazy")',
      decodingLabel: 'Decodificación (decoding)',
      includeSize: 'Incluir width/height',
      presetsCustom: 'Presets personalizados',
      presetId: 'ID (slug)',
      presetLabel: 'Etiqueta',
      presetCategory: 'Categoría',
      presetWidth: 'Ancho',
      presetHeight: 'Alto',
      presetAspect: 'Relación (W:H)',
      presetTypeHint: 'Tipo (foto/ui)',
      presetDensity: 'Densidad',
      presetRecommendedFormat: 'Formato recomendado',
      standardLabel: 'Estándar',
      higherDpiLabel: 'Alta densidad',
      saveSettings: 'Guardar cambios',
      cancelSettings: 'Cancelar cambios',
      resetSettings: 'Restablecer ajustes',
      createPreset: 'Crear preset',
      saveChanges: 'Guardar cambios',
      cancelEdit: 'Cancelar edición',
      noCustomPresets: 'No hay presets personalizados.',
      edit: 'Editar',
      duplicate: 'Duplicar',
      delete: 'Eliminar',
      confirmDelete: '¿Eliminar este preset?',
      cropTitle: 'Recortar imagen',
      cropSubtitle: 'Ajusta el área de recorte manteniendo la relación del preset.',
      cropReset: 'Restablecer',
      cropCancel: 'Cancelar',
      cropSave: 'Guardar recorte',
    },
    status: {
      PENDING: 'En cola',
      PROCESSING: 'En proceso',
      PAUSED: 'En pausa',
      CANCELED: 'Cancelado',
      DONE: 'Completado',
      FAILED: 'Fallido',
    },
    preset: {
      web: 'Web',
      redes: 'Redes',
      ecommerce: 'Ecommerce',
    },
  },
  en: {
    ui: {
      navUpload: 'Upload',
      navJobs: 'Processing queue',
      navSettings: 'Settings',
      logout: 'Log out',
      logoutTitle: 'Sign out',
      logoutMessage: 'Are you sure you want to sign out? You will need to log in again.',
      logoutConfirm: 'Log out',
      jobQueueTitle: 'Processing queue',
      jobQueueSubtitle: 'Check active and completed processes.',
      update: 'Refresh',
      concurrency: 'Concurrency',
      concurrencyHelp: 'Define how many images are processed in parallel (1 to 10).',
      concurrencyWarn: 'Warning: high values can slow down your computer.',
      tableId: 'ID',
      tablePreset: 'Preset',
      tableStatus: 'Status',
      tableProgress: 'Progress',
      tableFiles: 'Files',
      tableActions: 'Actions',
      view: 'View',
      pause: 'Pause',
      resume: 'Resume',
      cancel: 'Cancel',
      deleteJob: 'Delete',
      confirmDeleteJob: 'Do you want to delete this job and its files?',
      confirmDeleteJobTitle: 'Confirm deletion',
      confirmDeleteJobMessage:
        'Are you sure you want to delete this job and all its files? This action cannot be undone.',
      emptyJobs: 'No jobs created yet.',
      uploadTitle: 'Batch image optimizer',
      uploadSubtitle: 'Upload files, select a category and a preset. Processing runs in the background.',
      dropTitle: 'Drag and drop',
      dropSubtitle: 'or select files from your computer.',
      dropActiveTitle: 'Drop your files here',
      dropActiveSubtitle: 'We detected your images. Drop to add them.',
      onlyImages: 'Only images are allowed.',
      selectCategory: 'Category',
      selectPreset: 'Preset',
      suggestionSharp: 'Suggestion: Sharper (1.25x-1.5x).',
      summaryFiles: 'Files',
      summarySize: 'Total size',
      process: 'Process',
      clearFiles: 'Clear',
      creatingJobs: 'Creating jobs...',
      errorCreateJobFallback: 'Could not create the job. Try again.',
      errorLoadJob: 'Could not load the job.',
      errorLoadJobs: 'Could not load jobs.',
      errorLoadSettings: 'Could not load settings.',
      errorUpdateConcurrency: 'Could not update concurrency.',
      errorPauseJob: 'Could not pause the job.',
      errorResumeJob: 'Could not resume the job.',
      errorCancelJob: 'Could not cancel the job.',
      errorDeleteJob: 'Could not delete the job.',
      errorApplySettings: 'Could not apply settings.',
      errorSaveSettings: 'Could not save settings.',
      settingsSaved: 'Settings saved.',
      settingsCanceled: 'Changes canceled.',
      settingsReset: 'Settings reset.',
      presetSaved: 'Preset saved.',
      errorSavePreset: 'Could not save the preset.',
      errorDuplicatePreset: 'Could not duplicate.',
      errorDeletePreset: 'Could not delete.',
      jobsCreatedInfo: '{jobs} jobs were created because you uploaded {images} images (max 10 per job).',
      errorNoImages: 'Upload at least one image.',
      errorSelectPreset: 'Select a preset.',
      jobDetailTitle: 'Optimization details',
      jobDetailSubtitle: 'Check progress and download results.',
      backToJobs: 'Back to queue',
      downloadZip: 'Download ZIP',
      loginEyebrow: 'Demo sign in',
      loginTitle: 'Proyecto VIII — Digital Optimizer',
      loginSubtitle: 'Quick access for academic presentation.',
      loginPanelTitle: 'What this platform can do',
      loginBulletBatch: 'Batch image optimization (Web and Social)',
      loginBulletPresets: 'Presets for Instagram, Facebook, X, LinkedIn, and more',
      loginBulletCrop: 'Manual crop with preview',
      loginBulletAdjust: 'Per-image settings: format, quality, metadata, 2x',
      loginBulletZip: 'Download results in ZIP with report',
      loginFormTitle: 'Welcome',
      loginFormSubtitle: 'Sign in to continue with the demo.',
      loginUserLabel: 'User',
      loginPassLabel: 'Password',
      loginRemember: 'Remember session',
      loginShow: 'Show',
      loginHide: 'Hide',
      loginButton: 'Sign in',
      loginLoading: 'Signing in...',
      loginError: 'Incorrect username or password.',
      loginHelp: 'Need help signing in?',
      loginHintUser: 'User: proyectoVIII',
      loginHintPass: 'Password: Admin',
      loginDemoUser: 'Demo user: proyectoVIII',
      loginDemoPass: 'Demo password: Admin',
      loginFooterSubject: 'Subject: Proyecto VIII',
      loginFooterAdvisor: 'Advisor: Ursula del Pilar González Robles',
      loginFooterTeam: 'Scrum Team:',
      loginFooterMember1: '• Luis Yasmani Fajardo Durán – 222958771 (Product Owner)',
      loginFooterMember2: '• Bertha Alicia Ortega Ruiz – 303653994 (Scrum Master)',
      loginFooterMember3: '• Victor Leobardo Salinas Lemoine – 223983265 (Developer)',
      loginFooterMember4: '• Derek Kaled Barajas Cuevas – 223371901 (Developer)',
      loginFooterYear: 'Year: {year}',
      summary: 'Summary',
      preview: 'Preview',
      snippetBase: 'Base path (src)',
      snippetAll: 'Copy snippet (all)',
      copySnippet: 'Copy snippet',
      snippetCopied: 'Snippet copied.',
      snippetAdvanced: 'Advanced snippet is generated when multiple formats or 2x exist.',
      dimsBefore: 'Dimensions before',
      dimsAfter: 'Dimensions after',
      cropped: 'Crop applied',
      metadataRemoved: 'Metadata removed',
      finalFormat: 'Final format',
      original: 'Original',
      optimized: 'Optimized (by preset)',
      orientationLabel: 'Orientation',
      aspectLabel: 'Aspect',
      transparencyLabel: 'Transparency',
      typeLabel: 'Type',
      photoLabel: 'Photo',
      notAvailable: 'Not available',
      notReady: 'Not available yet',
      outputTarget: 'Target output',
      reduction: 'Reduction',
      primaryFormat: 'Primary format',
      outputsGenerated: 'Generated outputs',
      status: 'Status',
      yes: 'Yes',
      no: 'No',
      originalSizeLabel: 'Original',
      optimizedSizeLabel: 'Optimized',
      resultNameLabel: 'Result name',
      settingsEditable: 'Settings (you can edit)',
      fileSettings: 'Settings',
      unsavedChanges: 'Unsaved changes',
      formatsToGenerate: 'Formats to generate',
      primaryLabel: 'Primary',
      qualityWebp: 'WebP quality',
      qualityJpg: 'JPG quality',
      removeMetadata: 'Remove metadata',
      keepTransparency: 'Keep transparency',
      generate2x: 'Generate 2x (retina)',
      sharpened: 'Sharper (1.25×–1.5×)',
      recommendedPreset: 'Recommended for this preset',
      applySettings: 'Apply settings',
      pendingChanges: 'Pending changes to apply.',
      crop: 'Crop',
      autoCrop: 'Auto crop enabled due to orientation change',
      noUpscale:
        'No upscaling: the original is smaller than target size; crop will be adjusted to the maximum possible.',
      partialFailures: 'Some files failed. Check details.',
      settingsApplied: 'Settings applied and file reprocessed.',
      cropReady: 'Crop ready. Apply settings to reprocess.',
      recommendation: 'Recommendation (details)',
      recommendationPreset: 'Suggested preset',
      recommendationFormats: 'Suggested formats',
      recommendationQuality: 'Suggested quality',
      recommendationNote: 'Note',
      recommendationCrop: 'Crop is suggested to fit the format',
      settingsTitle: 'Settings',
      settingsSubtitle: 'Customize app behavior and presets.',
      preferences: 'Preferences',
      theme: 'Theme',
      themeDark: 'Dark',
      themeLight: 'Light',
      language: 'Language',
      languageEs: 'Spanish',
      languageEsMx: 'Spanish (MX)',
      languageEn: 'English',
      settingsConcurrency: 'Concurrency (1–10)',
      settingsConcurrencyValue: 'Concurrency (current: {value})',
      defaultRemoveMetadata: 'Remove metadata (recommended)',
      defaultKeepTransparency: 'Keep transparency when applicable',
      showDebugDetails: 'Show technical details',
      snippetTitle: 'HTML snippet',
      loadingLazy: 'Lazy loading (loading="lazy")',
      decodingLabel: 'Decoding (decoding)',
      includeSize: 'Include width/height',
      presetsCustom: 'Custom presets',
      presetId: 'ID (slug)',
      presetLabel: 'Label',
      presetCategory: 'Category',
      presetWidth: 'Width',
      presetHeight: 'Height',
      presetAspect: 'Aspect (W:H)',
      presetTypeHint: 'Type (photo/ui)',
      presetDensity: 'Density',
      presetRecommendedFormat: 'Recommended format',
      standardLabel: 'Standard',
      higherDpiLabel: 'Higher density',
      saveSettings: 'Save changes',
      cancelSettings: 'Cancel changes',
      resetSettings: 'Reset settings',
      createPreset: 'Create preset',
      saveChanges: 'Save changes',
      cancelEdit: 'Cancel edit',
      noCustomPresets: 'No custom presets.',
      edit: 'Edit',
      duplicate: 'Duplicate',
      delete: 'Delete',
      confirmDelete: 'Delete this preset?',
      cropTitle: 'Crop image',
      cropSubtitle: 'Adjust the crop area while keeping the preset ratio.',
      cropReset: 'Reset',
      cropCancel: 'Cancel',
      cropSave: 'Save crop',
    },
    status: {
      PENDING: 'Queued',
      PROCESSING: 'Processing',
      PAUSED: 'Paused',
      CANCELED: 'Canceled',
      DONE: 'Completed',
      FAILED: 'Failed',
    },
    preset: {
      web: 'Web',
      redes: 'Social',
      ecommerce: 'Ecommerce',
    },
  },
};

const listeners = new Set<() => void>();
let currentLocale: LocaleKey = (localStorage.getItem('locale') as LocaleKey) || 'es';

export function getLocale(): LocaleKey {
  return currentLocale;
}

export function setLocale(locale: LocaleKey) {
  currentLocale = locale;
  localStorage.setItem('locale', locale);
  listeners.forEach((listener) => listener());
}

export function useI18n() {
  const [, setTick] = useState(0);

  useEffect(() => {
    const onChange = () => setTick((value) => value + 1);
    listeners.add(onChange);
    return () => listeners.delete(onChange);
  }, []);

  const locale = currentLocale;
  const pack = TRANSLATIONS[locale] ?? TRANSLATIONS.es;

  return {
    locale,
    setLocale,
    t: pack.ui,
    statusLabel: (status: string) => pack.status[status] ?? status,
    presetLabel: (preset: string) => pack.preset[preset] ?? preset,
  };
}

export function resolveErrorMessage(
  err: unknown,
  fallback: string,
  locale: LocaleKey,
) {
  if (err instanceof Error && (locale === 'es' || locale === 'es-mx')) {
    return err.message;
  }
  return fallback;
}
